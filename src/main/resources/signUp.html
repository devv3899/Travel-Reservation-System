<!DOCTYPE html>
<html lang="en">
<head>
	<title>Flights User SignUp Page</title>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet"
		href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
	<script
		src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
	<script
		src="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
	</head>
<body>

	<style>
		.jumbotron {
			padding: 20px !important;
		}
	</style>

	<div class="jumbotron text-center">
		<h2>User SignUp</h2>
	</div>

	<div class="container">
		<div class="card-body text-center">
	
			<form class="text-left"
				style="margin: 10px 100px">
				<div class="form-group row">
					<label for="name" class="col-md-2 col-form-label">Name</label>
					<div class="col-md-4">
						<input type="text" class="form-control" id="name" name="name">
					</div>
				</div>
				<div class="form-group row">
					<label for="email" class="col-md-2 col-form-label">Email</label>
					<div class="col-md-4">
						<input type="text" class="form-control" id="email" name="email">
					</div>
				</div>
				<div class="form-group row">
					<label for="password" class="col-md-2 col-form-label">Password</label>
					<div class="col-md-4">
						<input type="password" class="form-control" id="password" name="password">
					</div>
				</div>
	
				<div class="form-group row">
					<label class="col-md-2 col-form-label"></label>
					<div class="col-md-4">
						<button id="signUpBtn" type="button"
							class="btn btn-primary">Sign Up</button>
					</div>
				</div>
			</form>
					
			
			<div class="form-group row">
				<button onclick='document.location.href="login"' type="submit" class="btn btn-link">Login</button>
			</div>
			
		</div>
	</div>

	<script>
	function signUpNow() {
		var dataObj = {};			
		dataObj.name = $('#name').val();
		dataObj.email = $('#email').val();
		dataObj.password = $('#password').val();
		dataObj.role = "user";
		
		$.ajax({
			   type: "POST",
			   url: 'signupUser',
	           dataType: "json",
	           contentType: "application/json;charset=utf-8",
			   data: JSON.stringify(dataObj),
			   success: function(data){
				   
				   if(data.success) {
					   alert('User created successfully.');
					   document.location.href="login";
				   } else {
					   alert(data.reason);
				   }
			   },
			   error: function(data) {
				   console.log(data);
				   alert('Request failed');
			   }
		 });
	}
	
	$( document ).ready(function() {
		$('#signUpBtn').click(signUpNow);
	});
		

</script>
</body>
</html>
