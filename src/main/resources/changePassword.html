<!DOCTYPE html>
<html lang="en">
<head>
	<title>Flights User Forgot Password</title>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet"
		href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
	<script
		src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
	<script
		src="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
	</head>
<body>

	<style>
		.jumbotron {
			padding: 20px !important;
		}
	</style>

	<div class="jumbotron text-center">
		<h2>Forgot Password</h2>
	</div>

	<div class="container">
		<div class="card-body text-center">
	
			<form class="text-left"
				style="margin: 10px 100px">
				<div class="form-group row">
					<label for="email" class="col-md-2 col-form-label">New Password</label>
					<div class="col-md-4">
						<input type="password" class="form-control" id="password" name="password">
					</div>
				</div>
	
				<div class="form-group row">
					<label class="col-md-2 col-form-label"></label>
					<div class="col-md-4">
						<button id="resetBtn" type="button"
							class="btn btn-primary">Change Password</button>
					</div>
				</div>
			</form>
			
			<div class="form-group row">
				<button onclick='document.location.href="login"' type="submit" class="btn btn-link">Login</button>
			</div>
			<div class="form-group row">
				<button onclick='document.location.href="signUp"' type="submit" class="btn btn-link">New User</button>
			</div>
	
		</div>
	</div>

	<script>
	function resetPassword() {
		var dataObj = {};			
		dataObj.password = $('#password').val();
		dataObj.token = "$EMAIL_TOKEN";
		
		$.ajax({
			   type: "POST",
			   url: 'changePassword',
	           dataType: "json",
	           contentType: "application/json;charset=utf-8",
			   data: JSON.stringify(dataObj),
			   success: function(data){
				   
				   if(data.success) {
					   alert(data.data);
					   document.location.href="login";					   
				   } else {
					   alert(data.reason);
				   }
			   },
			   error: function(data) {
				   console.log(data);
				   alert('Request failed');
			   }
		 });
	}
	
	$( document ).ready(function() {
		$('#resetBtn').click(resetPassword);
	});
		

</script>
</body>
</html>
